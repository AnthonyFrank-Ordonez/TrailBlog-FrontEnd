<!-- Mobile Header -->
<!-- Top Header -->
<header
  class="fixed top-0 left-0 right-0 text-secondary z-50 transition-transform duration-300 ease-in-out border-white/30 border-b lg:hidden bg-black"
  [class.transform]="true"
  [class.-translate-y-full]="hideHeader"
>
  <div class="flex items-center justify-between px-4 py-3">
    <div class="flex items-center space-x-2">
      <!-- Hamburger Menu -->
      <button class="p-1">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          ></path>
        </svg>
      </button>

      <!-- Logo and Filter -->
      <div class="flex items-center space-x-2">
        <span class="text-lg font-bold">Trail</span>
        <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"
          ></path>
        </svg>
      </div>
    </div>

    <div class="flex items-center">
      <!-- Search Icon -->
      <button class="flex items-center">
        <svg class="h-5 w-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
          ></path>
        </svg>
      </button>
    </div>
  </div>
</header>

<!-- Bottom Nav -->
<nav
  class="fixed bottom-0 right-0 left-0 bg-black border-t border-t-white/30 z-50 transition-transform duration-300 ease-in-out lg:hidden"
  [class.transform]="true"
  [class.translate-y-full]="hideBottomNav"
>
  <div class="flex justify-around items-center py-1">
    <button
      class="flex flex-col items-center justify-center space-y-1 p-2"
      [class.text-secondary]="activeTab() === 'home'"
      [class.text-gray-500]="activeTab() !== 'home'"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="icon icon-tabler icons-tabler-filled icon-tabler-home"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path
          d="M12.707 2.293l9 9c.63 .63 .184 1.707 -.707 1.707h-1v6a3 3 0 0 1 -3 3h-1v-7a3 3 0 0 0 -2.824 -2.995l-.176 -.005h-2a3 3 0 0 0 -3 3v7h-1a3 3 0 0 1 -3 -3v-6h-1c-.89 0 -1.337 -1.077 -.707 -1.707l9 -9a1 1 0 0 1 1.414 0m.293 11.707a1 1 0 0 1 1 1v7h-4v-7a1 1 0 0 1 .883 -.993l.117 -.007z"
        />
      </svg>

      <span class="text-xs">Home</span>
    </button>

    <button
      class="flex flex-col items-center justify-center space-y-1 p-2 text-gray-500"
      [class.text-secondary]="activeTab() === 'explore'"
      [class.text-gray-500]="activeTab() !== 'explore'"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 24 24"
        id="Explore-Fill--Streamline-Sharp-Fill-Material"
        height="24"
        width="24"
      >
        <path
          d="m6.575 17.425 7.25 -3.575 3.575 -7.25 -7.25 3.575 -3.575 7.25ZM12 13c-0.28335 0 -0.52085 -0.09585 -0.7125 -0.2875S11 12.28335 11 12c0 -0.28335 0.09585 -0.52085 0.2875 -0.7125S11.71665 11 12 11c0.28335 0 0.52085 0.09585 0.7125 0.2875S13 11.71665 13 12c0 0.28335 -0.09585 0.52085 -0.2875 0.7125S12.28335 13 12 13Zm0 9c-1.36665 0 -2.65835 -0.2625 -3.875 -0.7875 -1.21665 -0.525 -2.27915 -1.24165 -3.1875 -2.15 -0.908335 -0.90835 -1.625 -1.97085 -2.15 -3.1875C2.2625 14.65835 2 13.36665 2 12c0 -1.38335 0.2625 -2.68335 0.7875 -3.9 0.525 -1.21665 1.241665 -2.275 2.15 -3.175 0.90835 -0.9 1.97085 -1.6125 3.1875 -2.1375C9.34165 2.2625 10.63335 2 12 2c1.38335 0 2.68335 0.2625 3.9 0.7875 1.21665 0.525 2.275 1.2375 3.175 2.1375 0.9 0.9 1.6125 1.95835 2.1375 3.175C21.7375 9.31665 22 10.61665 22 12c0 1.36665 -0.2625 2.65835 -0.7875 3.875 -0.525 1.21665 -1.2375 2.27915 -2.1375 3.1875 -0.9 0.90835 -1.95835 1.625 -3.175 2.15C14.68335 21.7375 13.38335 22 12 22Z"
          stroke-width="0.5"
        ></path>
      </svg>
      <span class="text-xs">Explore</span>
    </button>

    <button
      (click)="setActiveTab('create')"
      class="flex flex-col items-center justify-center space-y-1 p-2 text-gray-500"
      [class.text-secondary]="activeTab() === 'create'"
      [class.text-gray-500]="activeTab() !== 'create'"
    >
      <svg
        class="w-6 h-6"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 16 16"
      >
        <path
          stroke="currentColor"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"
        />
      </svg>
      <span class="text-xs">Create</span>
    </button>

    <button
      class="flex flex-col items-center justify-center space-y-1 p-2 text-gray-500"
      [class.text-secondary]="activeTab() === 'inbox'"
      [class.text-gray-500]="activeTab() !== 'inbox'"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="icon icon-tabler icons-tabler-filled icon-tabler-bell"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path
          d="M14.235 19c.865 0 1.322 1.024 .745 1.668a3.992 3.992 0 0 1 -2.98 1.332a3.992 3.992 0 0 1 -2.98 -1.332c-.552 -.616 -.158 -1.579 .634 -1.661l.11 -.006h4.471z"
        />
        <path
          d="M12 2c1.358 0 2.506 .903 2.875 2.141l.046 .171l.008 .043a8.013 8.013 0 0 1 4.024 6.069l.028 .287l.019 .289v2.931l.021 .136a3 3 0 0 0 1.143 1.847l.167 .117l.162 .099c.86 .487 .56 1.766 -.377 1.864l-.116 .006h-16c-1.028 0 -1.387 -1.364 -.493 -1.87a3 3 0 0 0 1.472 -2.063l.021 -.143l.001 -2.97a8 8 0 0 1 3.821 -6.454l.248 -.146l.01 -.043a3.003 3.003 0 0 1 2.562 -2.29l.182 -.017l.176 -.004z"
        />
      </svg>

      <span class="text-xs">Notification</span>
    </button>

    <button
      class="flex flex-col items-center justify-center space-y-1 p-2 text-gray-500"
      [class.text-secondary]="activeTab() === 'account'"
      [class.text-gray-500]="activeTab() !== 'account'"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="currentColor"
        viewBox="0 0 24 24"
        id="User-Circle-Single--Streamline-Core"
        height="24"
        width="24"
      >
        <g id="user-circle-single--circle-geometric-human-person-single-user">
          <path
            id="Union"
            fill-rule="evenodd"
            d="M24 12c0 3.2174914285714284 -1.2663428571428572 6.1392 -3.3276 8.294057142857142 -2.177142857142857 2.2757142857142854 -5.240914285714285 3.696 -8.63658857142857 3.705942857142857L12 24l-0.03581142857142857 0c-3.3956742857142856 -0.009942857142857142 -6.4595142857142855 -1.4302285714285714 -8.636537142857142 -3.705942857142857C1.2662725714285712 18.1392 0 15.217491428571428 0 12c0 -6.6274114285714285 5.3725885714285715 -12 12 -12 6.627428571428571 0 12 5.3725885714285715 12 12Zm-4.726628571428571 6C17.544171428571428 15.90594857142857 14.927897142857143 14.571377142857141 12 14.571377142857141c-2.9278971428571428 0 -5.544102857142857 1.3345714285714285 -7.273457142857142 3.4286228571428574 1.7293542857142858 2.094 4.34556 3.4285714285714284 7.273457142857142 3.4285714285714284 2.9278971428571428 0 5.5441714285714285 -1.3345714285714285 7.273371428571428 -3.4285714285714284ZM12.000205714285713 12.857091428571428c2.3669314285714287 0 4.285714285714286 -1.918782857142857 4.285714285714286 -4.285714285714286s-1.918782857142857 -4.285714285714286 -4.285714285714286 -4.285714285714286 -4.285714285714286 1.918782857142857 -4.285714285714286 4.285714285714286 1.918782857142857 4.285714285714286 4.285714285714286 4.285714285714286Z"
            clip-rule="evenodd"
            stroke-width="1.7143"
          ></path>
        </g>
      </svg>
      <span class="text-xs">Profile</span>
    </button>
  </div>
</nav>

<!-- Dektop Header -->
<header
  class="hidden lg:block fixed right-0 bg-primary border-b border-white/30 z-50 top-0 left-1/2 transform -translate-x-1/2 w-full sm:max-w-xl md:max-w-3xl lg:max-w-5xl xl:max-w-7xl 2xl:max-w-[110rem]"
>
  <div class="flex items-center justify-between px-5 py-2 mx-auto">
    <!-- Logo -->
    <div class="flex items-center space-x-3">
      <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center">
        <span class="text-white font-bold text-sm">TB</span>
      </div>
      <span class="text-xl font-bold text-secondary">Trail</span>
    </div>

    <!-- Center: Search Bar -->
    <div class="flex-1 max-w-lg mx-8">
      <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            ></path>
          </svg>
        </div>

        <input
          type="text"
          placeholder="Search Trail"
          class="block w-full pl-10 pr-3 py-2 rounded-full bg-gray-500/30 text-gray-500 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent text-sm transition-colors"
        />
      </div>
    </div>

    <!-- Right Section: Actions + Profile -->
    <div class="flex items-center space-x-2">
      @if (isAuthenticated()) {
        <!-- Create Btn -->
        <button
          (click)="setActiveTab('create')"
          class="flex items-center space-x-1.5 px-2 py-2 text-white rounded-full text-sm font-medium transition-colors hover:bg-gray-800/40 cursor-pointer"
          routerLink="/create"
          zTooltip="Create Post"
          zPosition="bottom"
        >
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4v16m8-8H4"
            ></path>
          </svg>
          <span>Create</span>
        </button>

        <!-- Notification -->
        <button
          class="p-2 text-white hover:bg-gray-800/40 rounded-full transition-colors cursor-pointer"
          zTooltip="Notification"
          zPosition="bottom"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"
            />
          </svg>
        </button>

        <!-- Profile -->
        <div class="relative">
          <button
            class="flex items-center space-x-2 p-1 hover:bg-gray-800/40 rounded-full transition-colors cursor-pointer"
            zTooltip="Open Profile Menu"
            zPosition="bottom"
            z-dropdown
            [zDropdownMenu]="accountmenu"
          >
            <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center">
              <span class="text-white text-sm font-bold">{{ user()?.username | initials }}</span>
            </div>
          </button>

          <z-dropdown-menu-content
            #accountmenu="zDropdownMenuContent"
            class="bg-primary text-white border-white/30 hidden lg:block -mx-40"
          >
            <z-dropdown-menu-label>Your Profile</z-dropdown-menu-label>

            <z-dropdown-menu-item class="hover:bg-gray-800/50 flex items-center">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
              >
                <path
                  d="M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09.016.016.032.016.032.032.144.112.288.224.448.336.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16.144-.111.304-.223.448-.335.016-.016.032-.016.032-.032 1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816.24-.24.528-.463.816-.639.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023.144-.32.336-.607.576-.847.24-.24.528-.431.848-.575.32-.144.672-.208 1.024-.208.368 0 .704.064 1.024.208.32.144.608.336.848.575.24.24.432.528.576.847.144.32.208.672.208 1.023 0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848 2.84 2.84 0 0 1-.848.575 2.715 2.715 0 0 1-2.064 0 2.84 2.84 0 0 1-.848-.575 2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406 4.883 4.883 0 0 0-1.088-1.135 5.207 5.207 0 0 0-1.04-.608 2.82 2.82 0 0 0 .464-.383 4.2 4.2 0 0 0 .624-.784 3.624 3.624 0 0 0 .528-1.934 3.71 3.71 0 0 0-.288-1.47 3.799 3.799 0 0 0-.816-1.199 3.845 3.845 0 0 0-1.2-.8 3.72 3.72 0 0 0-1.472-.287 3.72 3.72 0 0 0-1.472.288 3.631 3.631 0 0 0-1.2.815 3.84 3.84 0 0 0-.8 1.199 3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007.096.336.224.64.4.927.16.288.384.544.624.784.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"
                />
              </svg>
              <span class="text-sm">Account </span>
            </z-dropdown-menu-item>

            <z-dropdown-menu-item class="hover:bg-gray-800/50 flex items-center">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
              >
                <path
                  d="M12.5 1h-9l-.5.5v13l.872.335L8 10.247l4.128 4.588L13 14.5v-13l-.5-.5zM12 13.2L8.372 9.165h-.744L4 13.2V2h8v11.2z"
                />
              </svg>
              <span class="text-sm">Saved </span>
            </z-dropdown-menu-item>

            <z-dropdown-menu-item class="hover:bg-gray-800/50 flex items-center">
              <svg
                width="21"
                height="21"
                viewBox="0 0 21 21"
                fill="currentColor"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 7.5H13.5M12 10.5H13.5M6 13.5H13.5M6 16.5H13.5M16.5 7.5H19.875C20.4963 7.5 21 8.00368 21 8.625V18C21 19.2426 19.9926 20.25 18.75 20.25M16.5 7.5V18C16.5 19.2426 17.5074 20.25 18.75 20.25M16.5 7.5V4.875C16.5 4.25368 15.9963 3.75 15.375 3.75H4.125C3.50368 3.75 3 4.25368 3 4.875V18C3 19.2426 4.00736 20.25 5.25 20.25H18.75M6 7.5H9V10.5H6V7.5Z"
                  stroke="#0F172A"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="text-sm">Posts </span>
            </z-dropdown-menu-item>

            <z-divider zSpacing="sm" class="bg-white/20"></z-divider>

            <z-dropdown-menu-item class="hover:bg-gray-800/50 flex items-center">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M19.85 8.75l4.15.83v4.84l-4.15.83 2.35 3.52-3.43 3.43-3.52-2.35-.83 4.15H9.58l-.83-4.15-3.52 2.35-3.43-3.43 2.35-3.52L0 14.42V9.58l4.15-.83L1.8 5.23 5.23 1.8l3.52 2.35L9.58 0h4.84l.83 4.15 3.52-2.35 3.43 3.43-2.35 3.52zm-1.57 5.07l4-.81v-2l-4-.81-.54-1.3 2.29-3.43-1.43-1.43-3.43 2.29-1.3-.54-.81-4h-2l-.81 4-1.3.54-3.43-2.29-1.43 1.43L6.38 8.9l-.54 1.3-4 .81v2l4 .81.54 1.3-2.29 3.43 1.43 1.43 3.43-2.29 1.3.54.81 4h2l.81-4 1.3-.54 3.43 2.29 1.43-1.43-2.29-3.43.54-1.3zm-8.186-4.672A3.43 3.43 0 0 1 12 8.57 3.44 3.44 0 0 1 15.43 12a3.43 3.43 0 1 1-5.336-2.852zm.956 4.274c.281.188.612.288.95.288A1.7 1.7 0 0 0 13.71 12a1.71 1.71 0 1 0-2.66 1.422z"
                />
              </svg>
              <span class="text-sm">Settings</span>
            </z-dropdown-menu-item>

            <z-divider zSpacing="sm" class="bg-white/20"></z-divider>

            <z-dropdown-menu-item
              (click)="onSignOut()"
              class="hover:bg-gray-800/50 flex items-center"
            >
              <svg
                width="15"
                height="15"
                viewBox="0 0 15 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z"
                  fill="currentColor"
                />
              </svg>

              <span class="text-sm">Sign Out</span>
            </z-dropdown-menu-item>
          </z-dropdown-menu-content>
        </div>
      } @else {
        <!-- Login Button -->
        <button
          routerLink="/login"
          class="bg-secondary px-5 py-2 rounded-full text-xs font-medium text-white tracking-wide cursor-pointer transition-colors duration-300 hover:bg-secondary/80"
        >
          Login
        </button>
      }
    </div>
  </div>
</header>
